<app-head-underline [title]="'Mapping User - Categories'"></app-head-underline>

<div class="mt-20 ml-20 mr-20 categroy-box ">
    <app-head-underline [title]="'Support User'"></app-head-underline>

    <dx-data-grid class="flex m-10 max-w-max " [dataSource]="userDataList" [showBorders]="true"
        [paging]="{ pageSize: 5 }" [columnAutoWidth]="true">
        <dxi-column dataField="userId" caption="ID" width="80" alignment="center"></dxi-column>
        <dxi-column dataField="username" caption="ชื่อ" minWidth="150" alignment="left"></dxi-column>
        <dxi-column dataField="roleName" caption="Role" minWidth="150" alignment="center"></dxi-column>

        <dxi-column caption="Action" width="200" [fixed]="true" [fixedPosition]="'right'" cellTemplate="actionTemplate"
            alignment="center">
        </dxi-column>
        <div *dxTemplate="let cell of 'actionTemplate'">
            <dx-button class="m-2" (onClick)="onMapDetailPopupShow(cell.data)" text="Map" type="success"
                stylingMode="contained"></dx-button>
        </div>
    </dx-data-grid>
</div>



<div class="product-popup">

    <dx-popup [height]="750" [(visible)]="mapDetailVisible" [width]="1200" [showTitle]="true"
        [closeOnOutsideClick]="true" title="Map Categories" (onHiding)="onMapDetailPopupHide()">
        <div class="popup-content">

            <!-- userhere -->
            <div class="flex justify-start label-group">

                <div class="m-10 ml-24 text-2xl user-box">
                    <span class="label">Username : </span>
                    <span class="username">{{ labelUsername }}</span>
                </div>
                <div class="m-10 ml-24 text-2xl user-box">
                    <span class="label">Role : </span>
                    <span class="username">{{ labelRole }}</span>
                </div>
            </div>

            <!-- tag -->
            <div class="mt-2 ml-20 mr-20 categroy-box ">
                <app-head-underline [title]="'Mapped Categories'"></app-head-underline>

                <dx-data-grid class="flex m-10 max-w-max " [dataSource]="mappedItem" [showBorders]="true"
                    [paging]="{ pageSize: 5 }" [columnAutoWidth]="true">
                    <!-- <dxo-search-panel [visible]="true" [width]="240" placeholder="Search..."></dxo-search-panel>

                    <dxo-filter-row [visible]="true"></dxo-filter-row> -->
                    <dxi-column dataField="issueCategoriesId" caption="ID" width="80" alignment="center"></dxi-column>
                    <dxi-column dataField="issueCategoriesName" caption="ชื่อ" minWidth="150"
                        alignment="left"></dxi-column>
                    <dxi-column dataField="isActive" caption="Active" minWidth="150" alignment="center"></dxi-column>

                    <dxi-column caption="Action" width="200" [fixed]="true" [fixedPosition]="'right'"
                        cellTemplate="actionTemplate" alignment="center">
                    </dxi-column>
                    <div *dxTemplate="let cell of 'actionTemplate'">
                        <dx-button class="m-2" (onClick)="onUnMapSubmit(cell.data)"  text="UnMap" type="danger" stylingMode="contained"></dx-button>
                    </div>
                </dx-data-grid>
            </div>
            <!-- untag -->
            <div class="mt-2 ml-20 mr-20 categroy-box ">
                <app-head-underline [title]="'Unmapped Categories'"></app-head-underline>

                <dx-data-grid class="flex m-10 max-w-max " [dataSource]="unmappedItem" [showBorders]="true"
                    [paging]="{ pageSize: 5 }" [columnAutoWidth]="true">
                    <dxi-column dataField="issueCategoriesId" caption="ID" width="80" alignment="center"></dxi-column>
                    <dxi-column dataField="issueCategoriesName" caption="ชื่อ" minWidth="150"
                        alignment="left"></dxi-column>
                    <dxi-column dataField="isActive" caption="Active" minWidth="150" alignment="center"></dxi-column>

                    <dxi-column caption="Action" width="200" [fixed]="true" [fixedPosition]="'right'"
                        cellTemplate="actionTemplate" alignment="center">
                    </dxi-column>
                    <div *dxTemplate="let cell of 'actionTemplate'">
                        <dx-button class="m-2" (onClick)="onMapSubmit(cell.data)" text="Map" type="success" stylingMode="contained"></dx-button>
                    </div>
                </dx-data-grid>
            </div>


        </div>
    </dx-popup>
</div>